<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°('25.12.15 Update)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Google Analytics (GA4) : G-EMZ954D7WH -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EMZ954D7WH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-EMZ954D7WH');
  </script>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", system-ui, sans-serif;
      background: radial-gradient(circle at top, #ffe08a 0, #f5f5f5 55%, #e0e0e0 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      padding: 16px;
    }

    .card {
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.08);
      padding: 20px 18px 22px;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .title-wrap {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 12px;
      color: #888;
    }

    .badge {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #fff7d1;
      color: #b58900;
      border: 1px solid #ffe08a;
      white-space: nowrap;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 8px;
    }

    .controls label {
      font-size: 13px;
      color: #333;
      white-space: nowrap;
    }

    .controls input[type="number"] {
      width: 70px;
      padding: 6px 8px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #ddd;
      text-align: center;
      outline: none;
    }

    .controls input[type="number"]:focus {
      border-color: #ffb300;
      box-shadow: 0 0 0 2px rgba(255,179,0,0.25);
    }

    .main-btn {
      flex: 1;
      cursor: pointer;
      border: none;
      border-radius: 999px;
      padding: 10px 16px;
      font-size: 15px;
      font-weight: 700;
      background: linear-gradient(135deg, #ffb300, #ff7a00);
      color: #fff;
      box-shadow: 0 8px 18px rgba(255,122,0,0.35);
      transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.1s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
    }

    .main-btn span { font-size: 16px; }

    .main-btn:active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      opacity: 0.95;
    }

    /* ===== í†µê³„ ëª¨ë“œ ì„ íƒ ë°•ìŠ¤(ì¶”ê°€) ===== */
    .mode-box {
      margin-bottom: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      background: #fffaf0;
      border: 1px solid #ffe9b3;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .mode-title {
      font-size: 12px;
      color: #b58900;
    }

    .mode-options {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
      align-items: center;
    }

    /* ë¼ë””ì˜¤ë¥¼ ë²„íŠ¼ì²˜ëŸ¼ ë³´ì´ê²Œ */
    .mode-opt {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 8px 6px;
      border-radius: 12px;
      border: 1px solid #ddd;
      background: #fff;
      cursor: pointer;
      user-select: none;
      font-size: 12px;
      color: #444;
    }

    .mode-opt input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .mode-opt.active {
      border-color: #ffb300;
      box-shadow: 0 0 0 2px rgba(255,179,0,0.20);
    }

    .mode-hint {
      font-size: 11px;
      color: #999;
      line-height: 1.35;
    }

    /* ë‚˜ì˜ í–‰ìš´ë²ˆí˜¸ ì˜ì—­ */
    .lucky-box {
      margin-bottom: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      background: #fffaf0;
      border: 1px solid #ffe9b3;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .lucky-label {
      font-size: 12px;
      color: #b58900;
    }

    .lucky-inputs {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
      align-items: center;
    }

    .lucky-inputs input[type="number"] {
      width: 100%;
      padding: 6px 8px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #ddd;
      text-align: center;
      outline: none;
      min-width: 0;
    }

    .lucky-inputs input[type="number"]:focus {
      border-color: #ffb300;
      box-shadow: 0 0 0 2px rgba(255,179,0,0.25);
    }

    .lucky-hint {
      font-size: 11px;
      color: #999;
    }

    .results {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      max-height: 380px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .row {
      display: grid;
      grid-template-columns: 44px 1fr 56px;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 18px;
      background: #fafafa;
      border: 1px solid #eee;
    }

    .row-label {
      font-size: 12px;
      color: #999;
      white-space: nowrap;
    }

    .balls {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 6px;
      min-width: 0;
    }

    .ball {
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 700;
      color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.18);
      user-select: none;
    }

    .ball.n1 { background: #f1c40f; }
    .ball.n2 { background: #3498db; }
    .ball.n3 { background: #e74c3c; }
    .ball.n4 { background: #7f8c8d; }
    .ball.n5 { background: #27ae60; }

    .copy-btn {
      width: 56px;
      cursor: pointer;
      border: none;
      border-radius: 999px;
      padding: 6px 0;
      font-size: 11px;
      font-weight: 600;
      background: #ffffff;
      color: #555;
      border: 1px solid #ddd;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }

    .copy-btn:active { background: #f0f0f0; }

    .coupang-banner {
      margin-top: 12px;
      display: flex;
      justify-content: center;
    }

    .coupang-banner iframe {
      width: 100%;
      max-width: 480px;
      height: 120px;
      border: 0;
    }

    .footer {
      margin-top: 10px;
      font-size: 11px;
      color: #999;
      text-align: center;
      line-height: 1.5;
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(0,0,0,0.8);
      color: #fff;
      font-size: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out, transform 0.2s ease-out;
      z-index: 999;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }

    @media (max-width: 380px) {
      .row { grid-template-columns: 42px 1fr 52px; gap: 6px; }
      .balls { gap: 4px; }
      .ball { font-size: 12px; }
      .copy-btn { width: 52px; font-size: 10px; }
      .mode-options { grid-template-columns: 1fr; }
    }

    @media (max-width: 480px) {
      .card { border-radius: 20px; padding: 18px 14px 20px; }
      h1 { font-size: 18px; }
      .results { max-height: 320px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="app-header">
        <div class="title-wrap">
          <h1>ë¡œë˜ë²ˆí˜¸ ìƒì„±ê¸°</h1>
          <div class="subtitle">*1~1202íšŒì°¨(25.12.14) ë‹¹ì²¨ë°ì´í„° ê¸°ë°˜</div>
        </div>
        <div class="badge">6 / 45</div>
      </div>

      <div class="controls">
        <label for="count">ê²Œì„ ìˆ˜</label>
        <input id="count" type="number" min="1" max="10" value="5" />
        <button id="generateBtn" class="main-btn">
          <span>ğŸ²</span> ë²ˆí˜¸ ìƒì„±
        </button>
      </div>

      <!-- (ì¶”ê°€) í†µê³„ ê°€ì¤‘ì¹˜ ëª¨ë“œ ì„ íƒ -->
      <div class="mode-box">
        <div class="mode-options">
          <label class="mode-opt" id="mode_low_wrap">
            <input type="radio" name="mode" id="mode_low" value="low" checked />
            ëœ ë‚˜ì˜¨ ë²ˆí˜¸ ì¤‘ì‹¬
          </label>
          <label class="mode-opt" id="mode_high_wrap">
            <input type="radio" name="mode" id="mode_high" value="high" />
            ë§ì´ ë‚˜ì˜¨ ë²ˆí˜¸ ì¤‘ì‹¬
          </label>
          <label class="mode-opt" id="mode_rand_wrap">
            <input type="radio" name="mode" id="mode_rand" value="random" />
            ì™„ì „ ëœë¤
          </label>
        </div>
        
      </div>

      <!-- ë‚˜ì˜ í–‰ìš´ë²ˆí˜¸ ì…ë ¥ ì˜ì—­ -->
      <div class="lucky-box">
        <div class="lucky-label">ë‚˜ì˜ í–‰ìš´ë²ˆí˜¸ ì…ë ¥í•´ë³´ì„¸ìš” (ìµœëŒ€ 3ê°œ)/ë¯¸ì…ë ¥ì‹œ ëœë¤</div>
        <div class="lucky-inputs">
          <input id="lucky1" type="number" min="1" max="45" placeholder="1~45" />
          <input id="lucky2" type="number" min="1" max="45" placeholder="1~45" />
          <input id="lucky3" type="number" min="1" max="45" placeholder="1~45" />
        </div>
        
      </div>

      <div class="results" id="results"></div>

      <!-- ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤ ë°°ë„ˆ -->
      <div class="coupang-banner">
        <iframe
          src="https://ads-partners.coupang.com/widgets.html?id=948403&template=carousel&trackingCode=AF4301864&subId=&width=480&height=120&tsource="
          scrolling="no"
          referrerpolicy="unsafe-url"
          browsingtopics>
        </iframe>
      </div>

      <div class="footer">
        ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.
      </div>
    </div>
  </div>

  <div id="toast" class="toast">í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.</div>

  <script>
    // ===== ì¶œí˜„ í†µê³„(ë‹¹ì²¨íšŸìˆ˜) =====
    const lottoStatsCount = {
      34:181, 12:177, 13:174, 27:173, 33:172, 18:171, 40:171, 37:170, 45:170, 14:169,
      3:167, 7:166, 17:166, 20:166, 19:165, 1:164, 16:164, 21:164, 38:164, 11:163,
      39:163, 15:162, 24:162, 26:162, 43:162, 6:161, 31:161, 36:160, 4:158, 35:158,
      44:158, 10:157, 8:153, 30:153, 5:152, 2:151, 29:151, 42:151, 28:150, 25:148,
      41:145, 23:144, 32:141, 22:140, 9:132
    };

    function getCount(num) {
      return lottoStatsCount[num] ?? 150;
    }

    const ALL_NUMS = Array.from({ length: 45 }, (_, i) => i + 1);
    const MAX_COUNT = Math.max(...ALL_NUMS.map(getCount));
    const MIN_COUNT = Math.min(...ALL_NUMS.map(getCount));

    // ===== ëª¨ë“œ ì½ê¸° =====
    function getMode() {
      const checked = document.querySelector('input[name="mode"]:checked');
      return checked ? checked.value : "low";
    }

    // ë²„íŠ¼ ìŠ¤íƒ€ì¼ active ì²˜ë¦¬
    function syncModeActiveUI() {
      const low = document.getElementById("mode_low_wrap");
      const high = document.getElementById("mode_high_wrap");
      const rnd = document.getElementById("mode_rand_wrap");
      low.classList.remove("active");
      high.classList.remove("active");
      rnd.classList.remove("active");

      const mode = getMode();
      if (mode === "low") low.classList.add("active");
      if (mode === "high") high.classList.add("active");
      if (mode === "random") rnd.classList.add("active");
    }

    // ===== ê°€ì¤‘ì¹˜ ì„¤ê³„ =====
    // low  : ì¶œí˜„íšŸìˆ˜ ë‚®ì„ìˆ˜ë¡ weightâ†‘  => (MAX - count + 1)
    // high : ì¶œí˜„íšŸìˆ˜ ë†’ì„ìˆ˜ë¡ weightâ†‘  => (count - MIN + 1)
    function getWeight(num, mode) {
      const c = getCount(num);
      if (mode === "low") return (MAX_COUNT - c + 1);
      if (mode === "high") return (c - MIN_COUNT + 1);
      return 1; // random
    }

    function weightedPickOne(candidates, weights) {
      const total = weights.reduce((a,b)=>a+b, 0);
      let r = Math.random() * total;
      for (let i = 0; i < candidates.length; i++) {
        r -= weights[i];
        if (r <= 0) return candidates[i];
      }
      return candidates[candidates.length - 1];
    }

    // ===== í–‰ìš´ë²ˆí˜¸ =====
    function getLuckyNumbers() {
      const ids = ["lucky1", "lucky2", "lucky3"];
      const nums = [];

      ids.forEach(id => {
        const val = parseInt(document.getElementById(id).value, 10);
        if (!isNaN(val) && val >= 1 && val <= 45 && !nums.includes(val)) {
          nums.push(val);
        }
      });

      return nums;
    }

    // ===== ë²ˆí˜¸ ìƒì„±(ëª¨ë“œ ì ìš©) =====
    function generateLottoNumbers(lucky) {
      const mode = getMode();
      const picked = [...lucky];

      // í›„ë³´êµ°: 1~45 ì¤‘ lucky ì œì™¸
      let candidates = ALL_NUMS.filter(n => !picked.includes(n));

      while (picked.length < 6) {
        if (mode === "random") {
          // ê· ë“± ëœë¤
          const idx = Math.floor(Math.random() * candidates.length);
          const choice = candidates[idx];
          picked.push(choice);
          candidates.splice(idx, 1);
        } else {
          // ê°€ì¤‘ì¹˜ ëœë¤
          const weights = candidates.map(n => getWeight(n, mode));
          const choice = weightedPickOne(candidates, weights);
          picked.push(choice);
          candidates = candidates.filter(n => n !== choice);
        }
      }

      picked.sort((a, b) => a - b);
      return picked;
    }

    function getColorClass(num) {
      if (num >= 1 && num <= 10) return "n1";
      if (num >= 11 && num <= 20) return "n2";
      if (num >= 21 && num <= 30) return "n3";
      if (num >= 31 && num <= 40) return "n4";
      return "n5";
    }

    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1400);
    }

    async function copyToClipboard(text) {
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
        } else {
          const textarea = document.createElement("textarea");
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand("copy");
          document.body.removeChild(textarea);
        }
        showToast("ë²ˆí˜¸ ì„¸íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      } catch (e) {
        showToast("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”.");
      }
    }

    function renderRows(count) {
      const resultsEl = document.getElementById("results");
      resultsEl.innerHTML = "";

      const luckyNumbers = getLuckyNumbers();

      for (let i = 1; i <= count; i++) {
        const numbers = generateLottoNumbers(luckyNumbers);
        const textForCopy = numbers.join(", ");

        const row = document.createElement("div");
        row.className = "row";

        const label = document.createElement("div");
        label.className = "row-label";
        label.textContent = i + " ê²Œì„";

        const ballsWrap = document.createElement("div");
        ballsWrap.className = "balls";

        numbers.forEach(num => {
          const ball = document.createElement("div");
          ball.className = "ball " + getColorClass(num);
          ball.textContent = num;
          ballsWrap.appendChild(ball);
        });

        const copyBtn = document.createElement("button");
        copyBtn.className = "copy-btn";
        copyBtn.type = "button";
        copyBtn.textContent = "ë³µì‚¬";
        copyBtn.addEventListener("click", () => copyToClipboard(textForCopy));

        row.appendChild(label);
        row.appendChild(ballsWrap);
        row.appendChild(copyBtn);

        resultsEl.appendChild(row);
      }
    }

    document.getElementById("generateBtn").addEventListener("click", function () {
      const countInput = document.getElementById("count");
      let count = parseInt(countInput.value, 10);
      if (isNaN(count) || count < 1) count = 1;
      if (count > 10) count = 10;
      countInput.value = count;
      renderRows(count);
    });

    // ëª¨ë“œ ë°”ë€Œë©´ ì¦‰ì‹œ ë°˜ì˜(ì›í•˜ë©´ ì¦‰ì‹œ ì¬ìƒì„±)
    document.querySelectorAll('input[name="mode"]').forEach(el => {
      el.addEventListener("change", () => {
        syncModeActiveUI();
        // ì„ íƒ ë°”ê¾¸ë©´ ë°”ë¡œ ë‹¤ì‹œ ë½‘ì•„ì£¼ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ ì£¼ì„ í•´ì œ
        renderRows(parseInt(document.getElementById("count").value, 10) || 5);
      });
    });

    // ì´ˆê¸° í‘œì‹œ
    syncModeActiveUI();
    renderRows(5);
  </script>
</body>
</html>
